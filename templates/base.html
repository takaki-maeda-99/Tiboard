<!DOCTYPE html>
{% load static %}
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %} Guild S {% endblock %}</title>

    <link rel="icon" type="image/png" sizes="256x256" href="{% static 'icons/256x256.png' %}">
    <link rel="icon" href="{% static 'icons/GuildS_icon.png' %}" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'icons/32x32.png' %}">
    <link rel="icon" type="image/png" sizes="48x48" href="{% static 'icons/48x48.png' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'icons/96x96.png' %}">
    <link rel="icon" type="image/png" sizes="192x192" href="{% static 'icons/192x192.png' %}">
    <link rel="manifest" href="{% static 'manifest.json' %}">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'base/styles.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <script>
        try {
            var auth_url = "{% url 'dash_board:auth' %}";
            var current_url = window.location.href;
            if (!current_url.includes("auth=")) {
                // nextパラメータをURLに追加してリダイレクト
                auth_url += "?next=" + encodeURIComponent(current_url);
                window.location.href = auth_url;
            }
        } catch (error) {
            // エラーが発生した場合は、エラーメッセージをコンソールに表示
            console.error("Error:", error);
        }
    </script>

    <div class="menu-button" id="menu-button">
        {% include 'menu-button.html'%}
    </div>    

    <div class="container-fluid">
        <div class="row">
            <div class="col-12 base-header" id="base-header">
                {% block base_header %}
                {% include 'header.html' %}
                {% endblock %}

            </div>
        </div>
        <div class="row">
            <div class="col-md-3 head-bar-side" id="head-bar-side">
                {% block head_bar_side %}{% endblock %}
            </div>
            <div class="col-md-9 head-bar-main overflow-x-scroll" id="head-bar-main">
                {% block head_bar_main %}{% endblock %}
            </div>
        </div>
            
        <div class="row">
            <div class="col-md-3 content-side overflow-y-scroll" id="content-side">
                {% block content_side %}{% endblock %}
            </div>
            <div class="col-md-9 content-main overflow-x-scroll overflow-y-scroll" id="content-main">
                {% block content_main %}{% endblock %}
            </div>
        </div>
        <div class="other_content">
            <div class="sidebar" id="sidebar">
                <button class="toggle-btn">&gt;</button>
                <div class="tasks" style="padding: 12px"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script src="{% static "base/script.js" %}"></script>
    <script src="{% static "base/script2.js" %}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const contentMain = document.getElementById('content-main');

            window.onload = function() {
                contentMain.scrollTop = contentMain.scrollHeight;
            };
        });
    </script>
</body>
</html>
